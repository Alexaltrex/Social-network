(this["webpackJsonpreact-02"]=this["webpackJsonpreact-02"]||[]).push([[5],{599:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(73),c=t(549),i=t(489),s=t(490),m=t(29),o=t(35),d=t(70),u=t(543),g=t(556),E=t(499),b=t(9),p=t(71),f=t(169),h=function(e){var a=e.primary,t=e.secondary,n=e.to,l=e.src,c=e.dialog,i=j(),h=Object(b.c)(),v=+Object(m.g)().userId===c.id,O=r.a.useMemo((function(){return r.a.forwardRef((function(e,a){return r.a.createElement(o.b,Object.assign({to:n,ref:a},e))}))}),[n]),N=f.a.dateTranslateFromAPI(t);return r.a.createElement("li",{className:i.item},r.a.createElement(s.a,{button:!0,component:O,selected:v,onClick:function(){h(p.c.setCurrentFriendsId(c.id))}},r.a.createElement(g.a,null,r.a.createElement(E.a,{src:l,className:i.avatar})),r.a.createElement(d.a,{color:"primary",variant:"h6"},r.a.createElement(u.a,{primary:a,secondary:N}))))},v=function(e){var a=e.dialog;return r.a.createElement(h,{to:"/dialogs/".concat(a.id),primary:a.userName,secondary:a.lastDialogActivityDate,src:a.photos.small?a.photos.small:void 0,dialog:a})},j=Object(l.a)({item:{borderTop:"1px solid #ccc","&:last-child":{borderBottom:"1px solid #ccc"}},avatar:{width:50,height:50,marginRight:10}}),O=t(592),N=t(82),I=function(){var e=y();return r.a.createElement("div",{className:e.skeletonWrapper},r.a.createElement(O.a,{variant:"circle",width:40,height:40,className:e.avatar}),r.a.createElement(O.a,{variant:"rect",width:200,height:45}))},x=function(e){var a=e.dialogs,t=y(),n=Object(b.d)(N.b),l=a&&a.map((function(e,a){return r.a.createElement(v,{key:e.id,dialog:e})}));return r.a.createElement(c.a,{className:t.card,elevation:6},n?r.a.createElement("div",null,r.a.createElement(I,null),r.a.createElement(I,null),r.a.createElement(I,null),r.a.createElement(I,null)):r.a.createElement(i.a,{disablePadding:!0},l))},y=Object(l.a)({card:{},avatar:{marginRight:10},btnWrapper:{marginBottom:10},skeletonWrapper:{padding:"0 16px",height:72,display:"flex",alignItems:"center"}}),k=t(593),C=t(293),w=t(291),S=t(568),R=t.n(S),F=t(570),W=t.n(F),B=t(569),D=t(594),L=function(e){var a=e.currentDialog,t=e.userId,n=e.isLoading,l=A(),c=Object(b.d)(N.h),i=a&&a.photos.small?a.photos.small:void 0,s=Object(b.c)();return r.a.createElement("div",{className:l.headerWrapper},n?r.a.createElement(k.a,{component:"div",className:l.header},r.a.createElement(O.a,{variant:"circle",width:40,height:40,className:l.avatar}),r.a.createElement(O.a,{variant:"rect",width:200,height:25})):r.a.createElement(k.a,{component:"div",className:l.header},a?r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{src:i,className:l.avatar}),r.a.createElement(C.a,{component:o.b,className:l.link,to:"/users/".concat(a.id),variant:"subtitle2"},a.userName),0!==c.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l.messagesCount},r.a.createElement(d.a,{variant:"body2",color:"textPrimary"},c.length," messages"),r.a.createElement(w.a,{onClick:function(){s(p.c.cleanSelectedId())},className:l.iconClean},r.a.createElement(R.a,null))),r.a.createElement("div",null,r.a.createElement(B.a,{title:"Delete",TransitionComponent:D.a,arrow:!0},r.a.createElement(w.a,{onClick:function(){t&&s(Object(p.b)(c,t))},className:l.iconClean},r.a.createElement(W.a,null)))))):r.a.createElement(d.a,{variant:"h6"},"Messages")))},A=Object(l.a)({avatar:{marginRight:10},header:{display:"flex",alignItems:"center",height:50},headerWrapper:{padding:5,borderBottom:"1px solid #ccc"},link:{marginRight:15},messagesCount:{display:"flex",alignItems:"center",marginRight:30},iconClean:{padding:5}}),P=t(42),M=t(573),T=t.n(M),z=t(86),G=t(197),J=t(572),q=t.n(J),H=t(571),K=t.n(H),Q=t(595),U=function(e){var a=e.message,t=e.src,l=V(),c=Object(n.useState)(!1),i=Object(P.a)(c,2),m=i[0],u=i[1],g=Object(b.d)(z.b),h=Object(b.d)(G.h),v=Object(b.d)(N.h),j=Object(b.c)(),O=v.includes(a.id);Object(n.useEffect)((function(){j(p.c.cleanSelectedId())}),[a]);var I=h?a.senderId===g?h.photos.small:t:void 0,x=a.senderId===g?"/profile":"/users/".concat(a.senderId),y=a.senderId===g?r.a.createElement(K.a,null):r.a.createElement(q.a,null);return r.a.createElement(s.a,{button:!0,onClick:function(){j(O?p.c.removeSelectedId(a.id):p.c.addSelectedId(a.id))},selected:O,className:l.listItem,classes:{selected:l.selected},onMouseEnter:function(){u(!0)},onMouseLeave:function(){u(!1)}},(m&&!O||O)&&r.a.createElement(T.a,{className:l.checkedIcon,color:O?"inherit":"disabled",fontSize:"small"}),r.a.createElement(E.a,{src:I,className:l.avatar}),r.a.createElement("div",{className:l.messageBlock},r.a.createElement("div",{className:l.title},r.a.createElement(C.a,{component:o.b,className:l.link,to:x,variant:"subtitle2"},a.senderName),r.a.createElement(d.a,{variant:"subtitle2",color:"textSecondary"},f.a.dateTranslateFromAPI(a.addedAt))),r.a.createElement("div",null,a.body)),r.a.createElement(Q.a,{className:l.icon},y))},V=Object(l.a)({listItem:{boxSizing:"border-box",margin:"2px 0px",padding:8,paddingLeft:40,position:"relative",display:"flex",alignItems:"flex-start"},checkedIcon:{position:"absolute",top:"50%",left:5,transform:"translate(0, -50%)"},selected:{backgroundColor:"red"},avatar:{marginRight:10},title:{display:"flex"},link:{marginRight:10},messageBlock:{flexGrow:1},icon:{marginRight:10}}),X=function(){var e=Z();return r.a.createElement("div",{className:e.skeletonCustom},r.a.createElement(O.a,{variant:"circle",width:40,height:40,className:e.avatar}),r.a.createElement(O.a,{variant:"rect",width:"100%",height:40}))},Y=function(e){var a=e.messages,t=e.src,n=e.userId,l=Object(b.d)(N.e),c=a&&a.map((function(e){return r.a.createElement(U,{message:e,src:t})}));return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement("div",null,l?r.a.createElement(r.a.Fragment,null,r.a.createElement(X,null),r.a.createElement(X,null),r.a.createElement(X,null),r.a.createElement(X,null)):r.a.createElement(r.a.Fragment,null,c)))},Z=Object(l.a)({skeletonCustom:{height:59,display:"flex",alignItems:"center",paddingLeft:40,paddingRight:15},avatar:{marginRight:10}}),$=t(204),_=t.n($),ee=t(203),ae=t(45),te=t(187),ne=t(49),re=t(188),le=t(303),ce=t.n(le),ie=Object(re.a)({form:"send-message-from-dialog",onSubmitSuccess:function(e,a){a(Object(ne.a)("send-message-from-dialog"))}})((function(e){var a=e.handleSubmit,t=e.submitting,n=e.pristine,l=oe(),c=me();return r.a.createElement("form",{onSubmit:a,className:l.form},r.a.createElement("div",{className:l.fieldWrapper},r.a.createElement(te.a,{name:"message",component:ee.a,validate:[ae.d],autoFocus:!0,rows:1,className:l.textArea,classes:c,label:"Enter your message",placeholder:"Enter your message",size:"small"})),r.a.createElement(w.a,{type:"submit",color:"primary",disabled:t||n},r.a.createElement(_.a,null)))})),se=function(e){var a=e.id,t=oe(),n=Object(b.c)();return r.a.createElement("div",{className:t.formWrapper},r.a.createElement(ie,{onSubmit:function(e){a&&n(Object(p.f)(a,e.message))}}))},me=Object(l.a)({root:{backgroundColor:"white",width:"100%"}}),oe=Object(l.a)({formWrapper:{backgroundColor:ce.a[100],padding:10},form:{display:"flex",alignItems:"center"},fieldWrapper:{flexGrow:1},textArea:{width:"100%"}}),de=function(e){var a=e.currentDialog,t=e.userId,n=e.isLoading,l=ue(),s=Object(b.d)(N.f),m=null!==a?a.photos.small:void 0;return r.a.createElement(c.a,{className:l.card,elevation:6},r.a.createElement(i.a,{disablePadding:!0,subheader:r.a.createElement(L,{currentDialog:a,userId:t,isLoading:n})},r.a.createElement(Y,{messages:s,src:m,userId:t})),r.a.createElement(se,{id:t}))},ue=Object(l.a)({card:{},btnWrapper:{marginBottom:10}}),ge=t(138),Ee=t(139),be=(a.default=Object(Ee.a)((function(){var e=be(),a=Object(b.c)(),t=Object(b.d)(ge.b),l=Object(b.d)(N.c),c=(Object(b.d)(N.a),Object(m.g)().userId);Object(n.useEffect)((function(){a(Object(p.d)())}),[]),Object(n.useEffect)((function(){c&&a(Object(p.e)(c))}),[c]);var i=l&&c?l.find((function(e){return e.id===+c})):null;return r.a.createElement(r.a.Fragment,null,(!t||l)&&r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.firstColumn},r.a.createElement(x,{dialogs:l})),r.a.createElement("div",{className:e.lastColumn},r.a.createElement(de,{currentDialog:i,userId:c,isLoading:t}))))})),Object(l.a)({root:{display:"flex"},firstColumn:{flexBasis:300,marginRight:15},lastColumn:{flexGrow:1}}))}}]);
//# sourceMappingURL=5.69cadcf2.chunk.js.map